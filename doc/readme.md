

# mall 系统设计说明文档

## 需求说明
    本项目是面向soa的分布式，技术栈为zookeeper，dubbo做分布式基础架构
    解决的主要问题是较为复杂业务情况，

## 系统架构

    
    
    数据架构采用mysql，
    分布式事务：alibaba-seata
    orm: mybatis,mybatis-plus
    
    中间层： 数据中台，数据接入层，
    表现层： mvc

## 数据结构

    商品类：
    库存：
    核销记录：
    会员：
    权益相关（卡券）
    
## 应用部署


passport: 颁发证书，验证证书


# 事务
TCC
![](medie/31.PNG)
基于两阶段提交的分布式实现，性能太低，在业务上通过基于消息补偿或者人工补偿方式处理。
两阶段提交：2pc
xa
TCC



## 基于消息的，最终一致性分布式事务
在消息系统中开启事务，保证消息被正常消费，否则回滚。
需要消息系统支持事务机制。

将消息的事务和普通事务放在一起，同时提交或者回滚，无法和数据库事务有相同的概念。
如果事务失败，补偿性。
回滚7次，失败进入死信队列。人工补偿。


